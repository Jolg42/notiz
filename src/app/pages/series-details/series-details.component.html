<niz-seo
  *ngIf="page$ | async as page"
  [title]="page.title"
  [description]="'All posts of ' + page.title"
  [route]="page.route"
  [tags]="[page.title]"
></niz-seo>

<div class="responsive-container">
  <div class="text-center py-8 space-y-2 md:space-y-5">
    <h1
      class="text-3xl leading-9 font-extrabold tracking-tight sm:text-4xl sm:leading-10 md:text-6xl md:leading-tight"
    >
      {{ (page$ | async)?.title }}
    </h1>
    <p
      class="max-w-lg mx-auto text-lg sm:text-2xl sm:leading-10 font-medium mb-10 sm:mb-11"
    >
      {{ (page$ | async)?.description }}
    </p>
  </div>

  <div class="post">
    <scully-content></scully-content>
  </div>

  <h2 class="text-xl font-semibold sm:text-2xl md:text-4xl">Chapters</h2>

  <div *ngIf="page$ | async as page" class="space-y-5">
    <div *ngFor="let chapter of page.chapters" class="space-y-2">
      <h3
        class="text-lg font-medium sm:text-xl md:text-2xl"
        [id]="chapter.slug"
      >
        {{ chapter.title }}
      </h3>

      <div class="rounded-md overflow-hidden">
        <a
          *ngFor="
            let post of seriesPosts$ | async | filterChapter: chapter.slug
          "
          class="flex flex-col p-4 bg-background-light space-y-2 md:space-y-0 md:flex-row md:items-center md:justify-between group hover:bg-background-shade"
          [routerLink]="post.route"
        >
          <span>
            <span
              class="block text-base font-bold group-hover:text-blue sm:text-lg md:text-xl"
            >
              {{ post.title }}
            </span>
            <span class="text-sm sm:text-base md:text-lg">
              {{ post.description }}
            </span>
          </span>

          <div class="flex space-x-2">
            <niz-inline-svg
              *ngFor="let tag of post.tags | slice: 0:3"
              class="h-6 w-6"
              [svgSource]="'assets/stack/' + tag + '.svg' | lowercase | dash"
            ></niz-inline-svg>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>
